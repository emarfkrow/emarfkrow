# DB Design Guideline

**テーブル名とカラム名に一定のルールを設定することで  
関連の評価や画面での入力方法の制御を行います。**  
設定した条件に沿うようにテーブル設計を行ってください。  
**設定した条件こそが命名規約となります。**

---

## 関連評価の例外設定

主キーと外部キーに則って関連を評価しますが  
特殊なケースは設定ファイルで指定します。

- 関連評価の対象外とするテーブル名の正規表現
- 子を持たないテーブル名の正規表現
- 親を持たないテーブル名の正規表現
- 弟にしないテーブル名の正規表現
- 弟を持たないテーブル名の正規表現
- 兄弟を評価しないテーブル名の正規表現
- 参照モデル探索に使用する、キーサフィックス：名サフィックスの組み合わせ

---

## カラム名による制御

カラム名およびサフィックスに従って  
楽観ロックなどの挙動の制御を行います。

- 処理対象外カラム名の正規表現
- 有効期間開始日
- 有効期間終了日
- 登録日時カラム名
- 登録者カラム名
- 登録者名カラム名
- 更新日時カラム名
- 更新者カラム名
- 更新者名カラム名
- 論理削除カラム名
- ステータスカラム名
- 履歴の変更理由のカラム名
- 表示順カラムサフィックスCSV
- 数値列でカンマ・小数編集しないサフィックス
- 集約時に合計するサフィックス
- 数値列で自動採番しないカラム名の正規表現
- 【ホスト対応】CHARがNOTNULLでもスペースが補填される場合、ここで正規表現が指定されていれば、それに該当する項目のみ必須チェック対象とする。
- 【ホスト対応】固定長列で自動採番するカラム名の正規表現
- 【ホスト対応】数値列がNOTNULLな場合、ここで正規表現が指定されていれば、「0」で補填する
- 【ホスト対応】更新日時カラムが日付型でなく文字列化する場合のみフォーマットを指定する

---

## VIEW用の拡張設定

VIEWについては追加の設定を行います。

- VIEWの検索条件にするプレフィクス
- VIEWの詳細画面用テーブル名とする列名
- 中間表などメニュー化しないビューサフィックスのリスト

---

## カラムサフィックスによる画面項目の制御

カラム名のサフィックスにより  
画面上での入力項目の制御を行います。

- 読み取り専用サフィックス
- 数値入力サフィックス
- 年月入力サフィックス
- 8桁日付入力サフィックス
- タイムスタンプサフィックス
- 日時入力サフィックス
- 日付入力サフィックス
- 時刻入力サフィックス
- 時間入力サフィックス
- 検索画面で範囲指定となるサフィックス
- 検索画面でnullを「0」として検索するサフィックス
- ファイル選択サフィックス
- 選択項目サフィックス
- 詳細画面でプルダウン指定にするサフィックス
- テキストエリアサフィックス

---

## 入力チェックルール

「valid.」+カラムサフィックス ごとにチェックルールとなる正規表現を指定します。

- formクラス内の文字列用バリデータの正規表現（サフィックスは2桁以上でないと誤爆しやすい）

---

## 業務カテゴリ

メニューのリンクを出力する際の並び順を指定します。  
「nav.order.prefix.re.」+ZERO梅連番 ごとにテーブル名のプレフィクスのうち業務部分を正規表現で指定します。

- nav.order.prefix.re.01 ^.CM$ →共通（CoMmon）
- nav.order.prefix.re.99 ^.SY$ →システム（SYstem）
など
